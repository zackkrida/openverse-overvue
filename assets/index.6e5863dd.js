var ye=Object.defineProperty,me=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var Q=(e,t,s)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,f=(e,t)=>{for(var s in t||(t={}))ge.call(t,s)&&Q(e,s,t[s]);if(Y)for(var s of Y(t))$e.call(t,s)&&Q(e,s,t[s]);return e},w=(e,t)=>me(e,we(t));import{d as y,o as i,c as l,a as r,t as v,u,b as A,e as S,F as I,r as T,f as $,g as N,i as ne,w as H,h as ke,j as be,k as Ae,l as W,m as L,n as d,p as M,q as B,s as xe,v as Le}from"./vendor.922535af.js";import{request as oe}from"https://cdn.skypack.dev/@octokit/request@5.6.3";const Oe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}};Oe();const re=1e3,ie=re*60,ae=ie*60,Se=ae*24,le=e=>{const t=e/Se,s=e/ae,o=e/ie,n=e/re;return t>=1?[t,t===1?"day":"days"]:s>=1?[s,s===1?"hour":"hours"]:o>=1?[o,o===1?"minute":"minutes"]:[Math.max(1,n),n<=1?"second":"seconds"]},G=e=>{const t=new Date(e),o=new Date(Date.now()).valueOf()-t.valueOf(),[n,a]=le(o),[,{value:h},{value:_}]=new Intl.RelativeTimeFormat().formatToParts(Math.round(n),a);return h+_},Ce={key:0},Re=S(" Last activity by "),ze=["href"],Fe=S(" "+v(" ")+" "),Ie=["href"],De=y({props:{activity:null},setup(e){return(t,s)=>e.activity.lastActivity.user?(i(),l("p",Ce,[Re,r("a",{href:e.activity.lastActivity.user.html_url},v(e.activity.lastActivity.user.login),9,ze),Fe,r("a",{href:e.activity.lastActivity.html_url},v(u(G)(e.activity.lastActivity.updated_at))+" ago",9,Ie)])):A("",!0)}});var k=(e,t)=>{const s=e.__vccOpts||e;for(const[o,n]of t)s[o]=n;return s};const Me={},Pe={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-info","aria-label":"Open issue"},je=r("circle",{cx:"12",cy:"12",r:"10"},null,-1),Ee=r("line",{x1:"12",y1:"16",x2:"12",y2:"12"},null,-1),qe=r("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"},null,-1),Te=[je,Ee,qe];function Be(e,t){return i(),l("svg",Pe,Te)}var Ve=k(Me,[["render",Be]]);const Ne={},He={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-git-pull-request","aria-label":"Open pull request"},We=r("circle",{cx:"18",cy:"18",r:"3"},null,-1),Ge=r("circle",{cx:"6",cy:"6",r:"3"},null,-1),Ue=r("path",{d:"M13 6h3a2 2 0 0 1 2 2v7"},null,-1),Je=r("line",{x1:"6",y1:"9",x2:"6",y2:"21"},null,-1),Ke=[We,Ge,Ue,Je];function Ye(e,t){return i(),l("svg",He,Ke)}var Qe=k(Ne,[["render",Ye]]);const Xe={},Ze={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-check-circle","aria-label":"Completed issue or PR"},et=r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),tt=r("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1),st=[et,tt];function nt(e,t){return i(),l("svg",Ze,st)}var X=k(Xe,[["render",nt]]);const ot={},rt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x-circle","aria-label":"Closed pull request"},it=r("circle",{cx:"12",cy:"12",r:"10"},null,-1),at=r("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),lt=r("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1),ct=[it,at,lt];function ut(e,t){return i(),l("svg",rt,ct)}var dt=k(ot,[["render",ut]]);const ht=y({props:{activity:null},setup(e){return(t,s)=>(i(),l("ul",null,[(i(!0),l(I,null,T(e.activity.labels,o=>(i(),l("li",null,v(o.name),1))),256))]))}}),ce=$(!1),ue=$(),de=$(),P=N(ce),Z=N(ue),_t=N(de),he=e=>(de.value=e["x-ratelimit-remaining"]&&parseInt(e["x-ratelimit-remaining"],10)||void 0,_t.value===0&&(ce.value=!0,ue.value=e["x-ratelimit-reset"]&&parseInt(e["x-ratelimit-reset"],10)||void 0),P.value),z=e=>!!e&&typeof e.$el!="undefined";function ft(e,t,s,o={}){ne(e)?H(e,(n,a)=>{const h=z(a)?a.$el:a,_=z(n)?n.$el:n;h==null||h.removeEventListener(t,s),_==null||_.addEventListener(t,s,o)}):ke(()=>{(z(e)?e.$el:e).addEventListener(t,s,o)}),be(()=>{const n=u(e);(z(n)?n.$el:n).removeEventListener(t,s)})}const F=typeof window=="undefined"||!("localStorage"in window)?void 0:window,U=Object.freeze({boolean:{read:e=>e==="true",write:e=>String(e)},number:{read:e=>parseFloat(e),write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)}}),vt=Object.freeze({listenToStorageChanges:!0,writeDefaults:!0,window:F,storage:F==null?void 0:F.localStorage,serializer:U.object,onError:e=>{console.error(e)}});function _e(e,t,s={}){var K;const o=f(f({},vt),s),{listenToStorageChanges:n,writeDefaults:a,window:h,storage:_,onError:x}=o,c=u(t),C=c==null?"object":typeof c=="boolean"?"boolean":typeof c=="string"?"string":typeof c=="number"?"number":"object",m=$(c),E=(K=s.serializer)!=null?K:U[C];function J(p){if(!(!_||p&&p.key!==e))try{const R=p?p.newValue:_.getItem(e);R==null?(m.value=c,a&&c!==null&&_.setItem(e,E.write(c))):m.value=E.read(R)}catch(R){x(R)}}return J(),h&&n&&ft(h,"storage",p=>setTimeout(()=>J(p),0)),_&&H(m,()=>{try{m.value==null?_.removeItem(e):_.setItem(e,E.write(m.value))}catch(p){x(p)}}),m}const pt="overvue:gh-auth",fe="invalid-auth",g=_e(pt,null,{serializer:U.string}),j=e=>{if(P.value)return!1;const t=ne(e)?e.value:e;return typeof t=="string"&&t!==fe},ve=()=>j(g)?{authorization:`token ${g.value}`}:void 0,yt=e=>{var s,o;const t=!e.comment_list||e.comment_list.length===0||new Date(e.updated_at).valueOf()>=new Date(e.comment_list[0].updated_at).valueOf()?"update":"comment";return[t,t==="update"?e:(o=(s=e.comment_list)==null?void 0:s[0])!=null?o:e]},mt=Object.freeze(["openverse","openverse-catalog","openverse-api","openverse-frontend"]),b=Ae({openverse:[],"openverse-catalog":[],"openverse-api":[],"openverse-frontend":[]}),O=$([]),wt=W(()=>Boolean(O.value.length)),gt=e=>O.value.length===0||O.value.some(t=>t.test(e)),$t=e=>W(()=>gt(e)),ee=()=>[...b.openverse,...b["openverse-catalog"],...b["openverse-api"],...b["openverse-frontend"]],q={openverse:!1,"openverse-catalog":!1,"openverse-api":!1,"openverse-frontend":!1},kt=async e=>await Promise.all(e.map(async t=>{try{const s=await oe(t.comments_url,{headers:ve(),sort:"desc",per_page:1});return he(s.headers),w(f({},t),{comment_list:s.data?s.data:[]})}catch(s){return console.error(`Unable to retrieve comments for issue(${t.id})`,s),w(f({},t),{comment_list:[]})}})),bt=e=>w(f({},e),{labels:e.labels.map(t=>typeof t=="string"?{name:t}:t)}),At=e=>{var t;return w(f({},e),{priority:(t=e.labels.find(s=>s.name.includes("priority")))==null?void 0:t.name.split(" ").slice(-1)[0]})},te=e=>{const[t,s]=yt(e);return w(f({},e),{lastActivityType:t,lastActivity:s})},xt=async e=>{if(q[e]||P.value)return[];q[e]=!0;try{const t=await oe("GET /repos/{owner}/{repo}/issues",{headers:ve(),owner:"WordPress",repo:e,sort:"updated"}),s=t.data.map(o=>At(bt(o)));return he(t.headers)||!j(g)?s.map(o=>te(w(f({},o),{comment_list:[]}))):(await kt(s)).map(te)}catch(t){return console.error(`Failed to retrieve issues for ${e}`,t),[]}finally{q[e]=!1}},Lt=async e=>{const t=await xt(e);t&&(b[e]=t)};mt.forEach(e=>Lt(e));const D=_e("overvue:read",{}),pe=e=>{const t=new Date(Date.now()).toISOString();D.value=e.reduce((s,o)=>Object.assign(s,{[o.id]:t}),f({},D.value))},V=e=>{const t=D.value[e.id];return t?new Date(e.lastActivity.updated_at).valueOf()<new Date(t).valueOf():!1},Ot="_activity_1l5zn_2",St="_hideableActivity_1l5zn_3",Ct="_hidden_1l5zn_21",Rt="_actions_1l5zn_43",zt="_icon_1l5zn_50",Ft="_markAsRead_1l5zn_55",It="_read_1l5zn_59",Dt="_title_1l5zn_63",Mt="_small_1l5zn_69";var Pt={activity:Ot,hideableActivity:St,hidden:Ct,actions:Rt,icon:zt,markAsRead:Ft,read:It,title:Dt,small:Mt};const jt=["disabled"],Et=["href"],qt=S(" Opened by "),Tt=["href"],Bt=y({props:{activity:null},setup(e){var x;const t=e,s=$(V(t.activity));H([D],()=>{s.value=V(t.activity)});const o="pull_request"in t.activity,n=typeof t.activity.closed_at=="string",a=typeof((x=t.activity.pull_request)==null?void 0:x.merged_at)=="string",h=o?n?dt:a?X:Qe:n?X:Ve,_=$t(t.activity);return(c,C)=>(i(),l("li",{class:d([c.$style.activity,u(wt)?c.$style.hideableActivity:c.$style.activity,s.value&&c.$style.read,!u(_)&&c.$style.hidden])},[r("div",{class:d(c.$style.actions)},[L(u(h),{class:d(c.$style.icon)},null,8,["class"]),r("button",{"aria-label":"Mark as read",onClick:C[0]||(C[0]=M(m=>u(pe)([e.activity]),["prevent"])),type:"button",disabled:s.value,class:d(c.$style.markAsRead)}," \u2611\uFE0F ",10,jt)],2),r("div",null,[r("a",{class:d(c.$style.title),href:e.activity.html_url},v(e.activity.title),11,Et),e.activity.user?(i(),l("p",{key:0,class:d(c.$style.small)},[qt,r("a",{href:e.activity.user.html_url},v(e.activity.user.login),9,Tt),S(" "+v(u(G)(e.activity.created_at))+" ago ",1)],2)):A("",!0),u(j)(u(g))?(i(),B(De,{key:1,class:d(c.$style.small),activity:e.activity},null,8,["class","activity"])):A("",!0),e.activity.labels.length?(i(),B(ht,{key:2,activity:e.activity,class:d(c.$style.small)},null,8,["activity","class"])):A("",!0)])],2))}}),Vt={$style:Pt};var Nt=k(Bt,[["__cssModules",Vt]]);const Ht="_container_axed4_2",Wt="_title_axed4_11",Gt="_titleLink_axed4_17",Ut="_pulls_axed4_30";var Jt={container:Ht,title:Wt,titleLink:Gt,pulls:Ut};const Kt=["href"],Yt=y({setup(e){return(t,s)=>(i(),l("div",{class:d(t.$style.container)},[(i(!0),l(I,null,T(u(b),(o,n)=>(i(),l("div",{class:d(t.$style.pulls),key:n},[r("h3",{class:d(t.$style.title)},[r("a",{class:d(t.$style.titleLink),href:`https://github.com/WordPress/${n}`,target:"_blank",rel:"noopener noreferrer"},"WordPress/"+v(n),11,Kt)],2),r("ul",null,[(i(!0),l(I,null,T(o,a=>(i(),B(Nt,{key:a.id,activity:a},null,8,["activity"]))),128))])],2))),128))],2))}}),Qt={$style:Jt};var Xt=k(Yt,[["__cssModules",Qt]]);const Zt={key:0},es=["onClick"],ts=y({setup(e){const t=$(ee().map(V).some(Boolean)),s=()=>{pe(ee()),t.value=!0};return(o,n)=>t.value?(i(),l("div",Zt,"You're all caught up!")):(i(),l("button",{key:1,onClick:M(s,["prevent"]),type:"button"}," Mark all as read ",8,es))}}),ss=["onSubmit"],ns=xe('<summary>Expand if you want to raise your GitHub rate limit.</summary><p> If you&#39;d like to get even <em>more</em> information (like when an issue or pull request was last updated and by whom), please provide a <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token" target="_blank" rel="noopener noreferrer">GitHub personal access token</a>. </p><p> This token will only be stored in your browser&#39;s <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" target="_blank" rel="noopener noreferrer"><code>localStorage</code></a> and will only be used to request information about activites in the public Openverse repositories. <strong>For your security, do not provide the token with any specific scopes! Leave all the scope checkboxes blank. This application does not need them and merely uses the token to increase the rate limit. Remember to always practice the <a href="https://en.wikipedia.org/wiki/Principle_of_least_privilege" target="_blank" rel="noopener noreferrer">principle of least privilege</a>.</strong></p><p> Providing a token is entirely optional. Without it you&#39;ll probably hit a rate limit if you visit this site often. Likewise, some features will be disabled to prevent hitting the rate limit (like specifics about who updated a pull request or issue). </p>',4),os={key:0},rs={key:1},is=r("label",null,[S("GitHub personal access token: "),r("input",{type:"text",name:"auth",required:""})],-1),as={key:1},ls=y({setup(e){const t=o=>{g.value=o.currentTarget.auth.value},s=()=>Z.value&&G(new Date(Z.value).toDateString());return(o,n)=>u(j)(u(g))?(i(),l("div",as,'Enjoy the "vue" \u{1F60E}')):(i(),l("form",{key:0,onSubmit:M(t,["prevent"])},[r("details",null,[ns,u(g)===u(fe)?(i(),l("p",os," Whoops, it looks like your personal access token wasn't valid. Check to see if it's expired. ")):A("",!0),u(P)?(i(),l("p",rs," Oh dear, your rate limit for the GitHub API has been reached. It will reset in "+v(s())+". ",1)):A("",!0),is])],40,ss))}}),se=Object.freeze({type:"priority",test:e=>{if(!("pull_request"in e))return!1;const[t,s]=le(new Date(Date.now()).valueOf()-new Date(e.lastActivity.updated_at).valueOf());if(!s.startsWith("day"))return!1;switch(e.priority){case"critical":return!0;case"high":return t>=2;case"medium":return t>=3;case"low":return t>=5;case null:return!1}}}),cs=["onClick"],us=y({setup(e){const t=W(()=>O.value.includes(se)),s=()=>O.value=t.value?[]:[se];return(o,n)=>(i(),l("button",{onClick:M(s,["prevent"]),type:"button"},v(u(t)?"Show all activity":"Show overdue PRs"),9,cs))}}),ds="_title_1vdwr_2",hs="_copy_1vdwr_11",_s="_auth_1vdwr_20";var fs={title:ds,copy:hs,auth:_s};const vs=y({setup(e){return(t,s)=>(i(),l(I,null,[r("h1",{class:d(t.$style.title)},"Openverse Project Overview",2),r("div",{class:d(t.$style.copy)},[r("div",{class:d(t.$style.auth)},[L(ls)],2),L(ts),L(us)],2),L(Xt)],64))}}),ps={$style:fs};var ys=k(vs,[["__cssModules",ps]]);Le(ys).mount("#app");
